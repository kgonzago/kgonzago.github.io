"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[3709],{62408:(e,t,r)=>{r.d(t,{EN:()=>c,H9:()=>u,eS:()=>o,f:()=>n});var n,a,i=r(21130);(a=n||(n={})).InvalidFunctionParameters="InvalidFunctionParameters",a.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",a.UnsupportedSqlFunction="UnsupportedSqlFunction",a.UnsupportedOperator="UnsupportedOperator",a.UnsupportedSyntax="UnsupportedSyntax",a.UnsupportedIsRhs="UnsupportedIsRhs",a.UnsupportedIsLhs="UnsupportedIsLhs",a.InvalidDataType="InvalidDataType",a.CannotCastValue="CannotCastValue",a.FunctionNotRecognized="FunctionNotRecognized",a.InvalidTime="InvalidTime",a.InvalidParameterCount="InvalidParameterCount",a.InvalidTimeStamp="InvalidTimeStamp",a.InvalidDate="InvalidDate",a.InvalidOperator="InvalidOperator",a.IllegalInterval="IllegalInterval",a.YearMonthIntervals="YearMonthIntervals",a.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",a.MissingStatisticParameters="MissingStatisticParameters";const s={[n.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[n.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[n.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[n.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[n.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[n.UnsupportedOperator]:"Unsupported operator - {operator}",[n.UnsupportedSyntax]:"Unsupported syntax - {node}",[n.UnsupportedSqlFunction]:"Sql function not found = {function}",[n.InvalidDataType]:"Invalid sql data type",[n.InvalidDate]:"Invalid date encountered",[n.InvalidOperator]:"Invalid operator encountered",[n.InvalidTime]:"Invalid time encountered",[n.IllegalInterval]:"Illegal interval",[n.FunctionNotRecognized]:"Function not recognized",[n.InvalidTimeStamp]:"Invalid timestamp encountered",[n.InvalidParameterCount]:"Invalid parameter count for call to {name}",[n.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[n.YearMonthIntervals]:"Year-Month Intervals not supported",[n.CannotCastValue]:"Cannot cast value to the required data type"};class o extends Error{constructor(e,t){super((0,i.gx)(s[e],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,o)}}var u;!function(e){e.NeverReach="NeverReach",e.NotImplemented="NotImplemented",e.Cancelled="Cancelled",e.InvalidStatResponse="InvalidStatResponse",e.InvalidRequest="InvalidRequest",e.RequestFailed="RequestFailed",e.MissingFeatures="MissingFeatures",e.AggregationFieldNotFound="AggregationFieldNotFound",e.DataElementsNotFound="DataElementsNotFound"}(u||(u={}));const l={[u.Cancelled]:"Cancelled",[u.InvalidStatResponse]:"Invalid statistics response from service",[u.InvalidRequest]:"Invalid request",[u.RequestFailed]:"Request failed - {reason}",[u.MissingFeatures]:"Missing features",[u.AggregationFieldNotFound]:"Aggregation field not found",[u.DataElementsNotFound]:"Data elements not found on service",[u.NeverReach]:"Encountered unreachable logic",[u.NotImplemented]:"Not implemented"};class c extends Error{constructor(e,t){super((0,i.gx)(l[e],t)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,c)}}},52192:(e,t,r)=>{r.d(t,{H:()=>i});var n=r(17126);function a(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}class i{constructor(e){this._timeStampOffset=e,this._date=null}toDateTime(){return this._date??=n.ou.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return a(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return a(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return i.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new i(n.ou.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new i(e.toISO({includeOffset:!0}))}static fromParts(e,t,r=0,n=0,a=0,s=0,o=0,u=!1,l=0,c=0){const f=`${e.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}`;let d="";s<10&&(d="0");let p=`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${d+s.toString()}`;0!==o&&(p+="."+o.toString().padStart(3,"0"));const v=`${u?"-":"+"}${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`;return new i(f+"T"+p+v)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&(e=e.replace(".000","")),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){const t=this.toDateTime().plus(e);return i.fromDateTime(t)}}},23709:(e,t,r)=>{r.r(t),r.d(t,{WhereClause:()=>ae,defaultAttributeAdapter:()=>he});var n=r(78053),a=r(62408),i=r(39994),s=r(19980),o=r(52192),u=r(62717),l=r(17126);function c(e,t){const r=f[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}const f={min:{minParams:1,maxParams:1,evaluate:e=>v(e[0],"min")},max:{minParams:1,maxParams:1,evaluate:e=>v(e[0],"max")},avg:{minParams:1,maxParams:1,evaluate:e=>d(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(null!==n){if(!p(n))throw new a.eS(a.f.InvalidValueForAggregateFunction);t+=n}}return t}(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;const t=h(e);return null===t?null:Math.sqrt(t)}(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>h(e[0])}};function d(e){if(null===e)return null;let t=0,r=0;for(let n=0;n<e.length;n++){const i=e[n];if(null!==i){if(!p(i))throw new a.eS(a.f.InvalidValueForAggregateFunction);r++,t+=i}}return 0===r?null:t/e.length}function p(e){return"number"==typeof e}function v(e,t){if(null===e)return null;let r=null,n=null;for(const a of e){let e=a;e=a instanceof s.u||a instanceof u.n?a.toNumber():a instanceof l.ou?a.toMillis():a instanceof o.H?a.toMilliseconds():a,(null===r||"max"===t&&null!==n&&null!==e&&n<=e||"min"===t&&null!==n&&null!==e&&n>=e)&&(r=a,n=e)}return r}function h(e){if(null===e)return null;if(0===(e=e.filter((e=>null!==e))).length)return null;const t=d(e);if(null===t)return null;let r=0;for(const n of e){if(!p(n))throw new a.eS(a.f.InvalidValueForAggregateFunction);r+=(t-n)**2}return r/(e.length-1)}class m{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(e){if(null!==e.precision||null!==e.secondary)throw new a.eS(a.f.PrimarySecondaryQualifiers)}static _parseSecondsComponent(e,t){if(t.includes(".")){const r=t.split(".");e.second=parseFloat(r[0]),e.millis=parseInt(r[1],10)}else e.second=parseFloat(t)}static createFromMilliseconds(e){const t=new m;return t.second=e/1e3,t}static createFromValueAndQualifer(e,t,r){let n=null;const i=new m;if(i.op="-"===r?"-":"+","interval-period"===t.type){m._fixDefaults(t);const r=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new a.eS(a.f.YearMonthIntervals);if("second"===t.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new a.eS(a.f.IllegalInterval);m._parseSecondsComponent(i,e)}else{if(!r.test(e))throw new a.eS(a.f.IllegalInterval);i[t.period]=parseFloat(e)}}else{if(m._fixDefaults(t.start),m._fixDefaults(t.end),"year"===t.start.period||"month"===t.start.period||"year"===t.end.period||"month"===t.end.period)throw new a.eS(a.f.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(n=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!n.test(e))throw new a.eS(a.f.IllegalInterval);i[t.start.period]=parseFloat(e.split(" ")[0]),i[t.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(n=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!n.test(e))throw new a.eS(a.f.IllegalInterval);{i[t.start.period]=parseFloat(e.split(" ")[0]);const r=e.split(" ")[1].split(":");i.hour=parseFloat(r[0]),i.minute=parseFloat(r[1])}break;case"second":if(n=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!n.test(e))throw new a.eS(a.f.IllegalInterval);{i[t.start.period]=parseFloat(e.split(" ")[0]);const r=e.split(" ")[1].split(":");i.hour=parseFloat(r[0]),i.minute=parseFloat(r[1]),m._parseSecondsComponent(i,r[2])}break;default:throw new a.eS(a.f.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(n=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!n.test(e))throw new a.eS(a.f.IllegalInterval);i.hour=parseFloat(e.split(":")[0]),i.minute=parseFloat(e.split(":")[1]);break;case"second":if(n=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!n.test(e))throw new a.eS(a.f.IllegalInterval);{const t=e.split(":");i.hour=parseFloat(t[0]),i.minute=parseFloat(t[1]),m._parseSecondsComponent(i,t[2])}break;default:throw new a.eS(a.f.IllegalInterval)}break;case"minute":if("second"!==t.end.period)throw new a.eS(a.f.IllegalInterval);if(n=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!n.test(e))throw new a.eS(a.f.IllegalInterval);{const t=e.split(":");i.minute=parseFloat(t[0]),m._parseSecondsComponent(i,t[1])}break;default:throw new a.eS(a.f.IllegalInterval)}}return i}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}var w=r(46576);const I=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,S=/^(\d{1,2}):(\d{1,2})$/,g=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,T=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,O=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function x(e,t){if(t instanceof l.ld)return t===w.yV.instance?l.ou.fromMillis(e.getTime(),{zone:w.yV.instance}):l.ou.fromJSDate(e,{zone:t});switch(t){case"system":case"local":case null:return l.ou.fromJSDate(e);default:return"unknown"===t?.toLowerCase()?l.ou.fromMillis(e.getTime(),{zone:w.yV.instance}):l.ou.fromJSDate(e,{zone:t})}}function b(e){return"number"==typeof e}function A(e){return"string"==typeof e||e instanceof String}function M(e){return e instanceof m}function E(e){return e instanceof Date}function F(e){return e instanceof l.ou}function D(e){return e instanceof s.u}function P(e){return e instanceof u.n}function _(e){return e instanceof o.H}function L(e){let t=I.exec(e);if(null!==t){const[,e,r,n]=t,i=u.n.fromParts(parseInt(e,10),parseInt(r,10),parseInt(n,10),0);if(null!==i)return i;throw new a.eS(a.f.InvalidTime)}if(t=S.exec(e),null!==t){const[,e,r]=t,n=u.n.fromParts(parseInt(e,10),parseInt(r,10),0,0);if(null!==n)return n;throw new a.eS(a.f.InvalidTime)}if(t=g.exec(e),null!==t){const[,e,r,n,i]=t,s=u.n.fromParts(parseInt(e,10),parseInt(r,10),parseInt(n,10),parseInt(i,10));if(null!==s)return s;throw new a.eS(a.f.InvalidTime)}throw new a.eS(a.f.InvalidTime)}function R(e,t,r=!1){let n=T.exec(e);if(null!==n){const[,e,r,i,s,o,u,c]=n,f=l.ou.fromObject({year:parseInt(e,10),month:parseInt(r,10),day:parseInt(i,10),hour:parseInt(s,10),minute:parseInt(o,10),second:parseInt(u,10),millisecond:c?parseInt(c.replace(".",""),10):0},{zone:(0,w.L9)(t)});if(!1===f.isValid)throw new a.eS(a.f.InvalidTimeStamp);return f}if(n=N.exec(e),null!==n){const[,e,t,r,i,s,u,l,c,f,d]=n,p=o.H.fromParts(parseInt(e,10),parseInt(t,10),parseInt(r,10),parseInt(i,10),parseInt(s,10),parseInt(u,10),l?parseInt(l.replace(".",""),10):0,"-"===c,parseInt(f,10),parseInt(d,10));if(!1===p.isValid)throw new a.eS(a.f.InvalidTimeStamp);return p}if(n=O.exec(e),null!==n){const[,e,t,r,i,s,u,l,c]=n,f=o.H.fromParts(parseInt(e,10),parseInt(t,10),parseInt(r,10),parseInt(i,10),parseInt(s,10),0,0,"-"===u,parseInt(l,10),parseInt(c,10));if(!1===f.isValid)throw new a.eS(a.f.InvalidTimeStamp);return f}if(n=C.exec(e),null!==n){const[,e,r,i,s,o]=n,u=l.ou.fromObject({year:parseInt(e,10),month:parseInt(r,10),day:parseInt(i,10),hour:parseInt(s,10),minute:parseInt(o,10),second:0},{zone:(0,w.L9)(t)});if(!1===u.isValid)throw new a.eS(a.f.InvalidTimeStamp);return u}if(n=y.exec(e),null!==n){const[,e,r,i]=n,s=l.ou.fromObject({year:parseInt(e,10),month:parseInt(r,10),day:parseInt(i,10),hour:0,minute:0,second:0},{zone:(0,w.L9)(t)});if(!1===s.isValid)throw new a.eS(a.f.InvalidTimeStamp);return s}throw new a.eS(a.f.InvalidTimeStamp)}function U(e,t){const r=y.exec(e);if(null===r)try{return R(e,t)}catch{throw new a.eS(a.f.InvalidDate)}const[,n,i,o]=r,u=s.u.fromParts(parseInt(n,10),parseInt(i,10),parseInt(o,10));if(null===u)throw new a.eS(a.f.InvalidDate);return u}var V=r(21130);function J(e){return!!F(e)||!!_(e)}function $(e){if(F(e))return e.toMillis();if(D(e))return e.toNumber();if(_(e))return e.toMilliseconds();throw new a.eS(a.f.InvalidDataType)}function H(e,t,r,n){if(null==e||null==t)return null;if(b(e)){if(b(t))return k(e,t,r);if(A(t))return function(e,t,r){const n=parseFloat(t);if(!isNaN(n))return k(e,n,r);const a=e.toString();switch(r){case"<>":return a!==t;case"=":return a===t;case">":return a>t;case"<":return a<t;case">=":return a>=t;case"<=":return a<=t}}(e,t,r);if(F(i=t)||D(i)||_(i)||P(i))throw new a.eS(a.f.InvalidOperator);if(D(t))throw new a.eS(a.f.InvalidOperator)}else if(A(e)){if(b(t))return function(e,t,r){const n=parseFloat(e);if(!isNaN(n))return k(n,t,r);const a=t.toString();switch(r){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}(e,t,r);if(A(t))return function(e,t,r){switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}(e,t,r);if(F(t))throw new a.eS(a.f.InvalidOperator);if(D(t))throw new a.eS(a.f.InvalidOperator);if(P(t))throw new a.eS(a.f.InvalidOperator);if(_(t))throw new a.eS(a.f.InvalidOperator)}else if(F(e)){if(J(t)){if(e instanceof l.ou&&(0,w.A4)(e.zone)){if(t instanceof l.ou&&!1===(0,w.A4)(t.zone))return Z(e,t,r);if(t instanceof o.H)return Z(e,t,r)}else if(t instanceof l.ou&&(0,w.A4)(t.zone)){if(e instanceof l.ou&&!1===(0,w.A4)(e.zone))return Z(e,t,r);if(e instanceof o.H)return Z(e,t,r)}return k($(e),$(t),r)}if(A(t))throw new a.eS(a.f.InvalidOperator);if(D(t))return function(e,t,r){const n=t.toDateTimeLuxon(e.zone);return k((e=e.startOf("day")).toMillis(),n.toMillis(),r)}(e,t,r);if(P(t))throw new a.eS(a.f.InvalidOperator);if(b(t))throw new a.eS(a.f.InvalidOperator)}else if(D(e)){if(_(t))return function(e,t,r){const n=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),k(n.toMillis(),t.toMilliseconds(),r)}(e,t,r);if(F(t))return function(e,t,r){const n=e.toDateTimeLuxon(t.zone);return t=t.startOf("day"),k(n.toMillis(),t.toMillis(),r)}(e,t,r);if(A(t))throw new a.eS(a.f.InvalidOperator);if(D(t))return k(e.toNumber(),t.toNumber(),r);if(P(t))throw new a.eS(a.f.InvalidOperator);if(b(t))throw new a.eS(a.f.InvalidOperator)}else if(P(e)){if(P(t))return k(e.toNumber(),t.toNumber(),r);if(A(t))throw new a.eS(a.f.InvalidOperator);if(b(t))throw new a.eS(a.f.InvalidOperator);if(D(t))throw new a.eS(a.f.InvalidOperator);if(J(t))throw new a.eS(a.f.InvalidOperator)}else if(_(e)){if(J(t))return t instanceof l.ou&&(0,w.A4)(t.zone)?Z(e,t,r):k($(e),$(t),r);if(A(t))throw new a.eS(a.f.InvalidOperator);if(D(t))return function(e,t,r){const n=t.toDateTimeLuxon(e.toDateTime().zone);return k((e=e.startOfDay()).toMilliseconds(),n.toMillis(),r)}(e,t,r);if(P(t))throw new a.eS(a.f.InvalidOperator);if(b(t))throw new a.eS(a.f.InvalidOperator)}var i;switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function k(e,t,r){switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function Z(e,t,r){e instanceof o.H&&(e=e.toDateTime()),t instanceof o.H&&(t=t.toDateTime());const n=z(e),a=z(t);switch(r){case"<>":return n!==a;case"=":return n===a;case">":return n>a;case"<":return n<a;case">=":return n>=a;case"<=":return n<=a}}function z(e){return 321408e5*e.year+26784e5*e.month+864e5*e.day+36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond}function q(e,t,r){const n=j[e.toLowerCase()];if(null==n)throw new a.eS(a.f.FunctionNotRecognized);if(t.length<n.minParams||t.length>n.maxParams)throw new a.eS(a.f.InvalidParameterCount,{name:e.toUpperCase()});return n.evaluate(t,r)}function Y(e){return"string"==typeof e||e instanceof String}function B(e){return!(E(e)||D(e)||F(e)||P(e)||_(e))}function Q(e){return D(e)||P(e)?e.toString():_(e)?e.toSQLValue():F(e)?0===e.millisecond?e.toFormat("yyyy-LL-dd HH:mm:ss"):e.toSQL({includeOffset:!1}):E(e)?Q(l.ou.fromJSDate(e)):e.toString()}const j={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(null==t)return null;if(E(t))switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(F(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new a.eS(a.f.InvalidFunctionParameters,{function:"EXTRACT"})}else if(D(t))switch(e.toUpperCase()){case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new a.eS(a.f.InvalidFunctionParameters,{function:"EXTRACT"})}else if(P(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour}else if(_(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":return t.timezoneOffsetHour;case"TIMEZONE_MINUTE":return t.timezoneOffsetMinutes}throw new a.eS(a.f.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const[t,r]=e;return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){const[t,r,n]=e;return null==t||null==r||null==n?null:n<=0?"":t.toString().substring(r-1,r+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>null==e||null==t?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=3===e.length,r=t?e[1]:" ",n=t?e[2]:e[1];if(null==r||null==n)return null;const i=`(${(0,V.Qs)(r)})`;switch(e[0]){case"BOTH":return n.replaceAll(new RegExp(`^${i}*|${i}*$`,"g"),"");case"LEADING":return n.replaceAll(new RegExp(`^${i}*`,"g"),"");case"TRAILING":return n.replaceAll(new RegExp(`${i}*$`,"g"),"")}throw new a.eS(a.f.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0]>0?1:e[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],r=2===e.length?10**e[1]:1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>Y(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:(e,t)=>H(e[0],e[1],"=")?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,t)=>{const r=e[0],n=e[1];if(null===r)return null;switch(n.type){case"integer":{if(!B(r))throw new a.eS(a.f.CannotCastValue);const e=parseInt(r,10);if(isNaN(e))throw new a.eS(a.f.CannotCastValue);return e}case"smallint":{if(!B(r))throw new a.eS(a.f.CannotCastValue);const e=parseInt(r,10);if(isNaN(e))throw new a.eS(a.f.CannotCastValue);if(e>32767||e<-32767)throw new a.eS(a.f.CannotCastValue);return e}case"float":case"real":{if(!B(r))throw new a.eS(a.f.CannotCastValue);const e=parseFloat(r);if(isNaN(e))throw new a.eS(a.f.CannotCastValue);return e}case"time":return function(e){if(E(e))return u.n.fromDateJS(e);if(F(e))return u.n.fromDateTime(e);if(D(e))throw new a.eS(a.f.CannotCastValue);if(P(e))return e;if(_(e))return u.n.fromSqlTimeStampOffset(e);if(Y(e))return L(e);throw new a.eS(a.f.CannotCastValue)}(r);case"date":return function(e){if(E(e))return s.u.fromDateJS(e);if(F(e))return s.u.fromParts(e.year,e.month,e.day);if(D(e))return e;if(P(e))throw new a.eS(a.f.CannotCastValue);if(_(e)&&null===s.u.fromParts(e.year,e.month,e.day))throw new a.eS(a.f.CannotCastValue);if(Y(e)){const t=s.u.fromReader(e);if(null!==t&&t.isValid)return t}throw new a.eS(a.f.CannotCastValue)}(r);case"timestamp":return function(e,t,r){if(E(e))return x(e,t);if(F(e))return e;if(D(e))return e.toDateTimeLuxon("unknown");if(P(e))throw new a.eS(a.f.CannotCastValue);if(_(e))return e;if(Y(e))return R(e,"unknown",r);throw new a.eS(a.f.CannotCastValue)}(r,t,!0===n.withtimezone);case"varchar":{const e=Q(r);if(e.length>n.size)throw new a.eS(a.f.CannotCastValue);return e}default:throw new a.eS(a.f.InvalidDataType)}}}};function G(e,t,r,n){if("||"===e)return q("concat",[t,r],n);if(null===t||null===r)return null;if(b(t)){if(b(r))return W(t,r,e);if(M(r))return function(e,t,r){switch(r){case"+":return m.createFromMilliseconds(e+t.valueInMilliseconds());case"-":return m.createFromMilliseconds(e-t.valueInMilliseconds());case"*":return m.createFromMilliseconds(e*t.valueInMilliseconds());case"/":return m.createFromMilliseconds(e/t.valueInMilliseconds())}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(P(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(D(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(_(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(F(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(A(r))return function(e,t,r){const n=parseFloat(t);if(isNaN(n))throw new a.eS(a.f.InvalidOperator);return W(e,n,r)}(t,r,e);throw new a.eS(a.f.InvalidOperator)}if(D(t)){if(b(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.plus("milliseconds",n);case"-":return e.plus("milliseconds",-1*n)}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(M(r))return function(e,t,r){switch(r){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(P(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(D(r))return function(e,t,r){if("-"===r)return e.toDateTimeLuxon("UTC").diff(t.toDateTimeLuxon("UTC")).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(_(r))return function(e,t,r){if("-"===r)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(F(r))return function(e,t,r){if("-"===r)return e.toDateTimeLuxon(t.zone).diff(t).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(A(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();throw new a.eS(a.f.InvalidOperator)}if(P(t)){if(b(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.plus("milliseconds",n);case"-":return e.plus("milliseconds",-1*n)}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(M(r))return function(e,t,r){switch(r){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(P(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(D(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(_(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(F(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(A(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();throw new a.eS(a.f.InvalidOperator)}if(M(t)){if(b(r))return function(e,t,r){switch(r){case"+":return m.createFromMilliseconds(e.valueInMilliseconds()+t);case"-":return m.createFromMilliseconds(e.valueInMilliseconds()-t);case"*":return m.createFromMilliseconds(e.valueInMilliseconds()*t);case"/":return m.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(M(r))return function(e,t,r){switch(r){case"+":return m.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case"-":return m.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case"*":return m.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case"/":return m.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(P(r))return function(e,t,r){if("+"===r)return t.plus("milliseconds",e.valueInMilliseconds());throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(D(r))return function(e,t,r){if("+"===r)return t.plus("milliseconds",e.valueInMilliseconds());throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(_(r))return function(e,t,r){if("+"===r)return t.addMilliseconds(e.valueInMilliseconds());throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(F(r))return function(e,t,r){switch(r){case"+":return t.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-t.toMillis()}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(A(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();throw new a.eS(a.f.InvalidOperator)}if(F(t)){if(b(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.plus({milliseconds:n});case"-":return e.minus({milliseconds:n})}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(M(r))return function(e,t,r){switch(r){case"+":return e.plus({milliseconds:t.valueInMilliseconds()});case"-":return e.minus({milliseconds:t.valueInMilliseconds()})}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(P(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(D(r))return function(e,t,r){if("-"===r)return e.diff(t.toDateTimeLuxon(e.zone)).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(_(r))return function(e,t,r){if("-"===r)return e.diff(t.toDateTime()).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(F(r))return function(e,t,r){if("-"===r)return e.diff(t).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(A(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();throw new a.eS(a.f.InvalidOperator)}if(_(t)){if(b(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.addMilliseconds(n);case"-":return e.addMilliseconds(-1*n)}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(M(r))return function(e,t,r){switch(r){case"+":return e.addMilliseconds(t.valueInMilliseconds());case"-":return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(P(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(D(r))return function(e,t,r){if("-"===r)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(_(r))return function(e,t,r){if("-"===r)return e.toDateTime().diff(t.toDateTime()).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(F(r))return function(e,t,r){if("-"===r)return e.toDateTime().diff(t).as("days");throw new a.eS(a.f.InvalidOperator)}(t,r,e);if(A(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();throw new a.eS(a.f.InvalidOperator)}if(A(t)){if(b(r))return function(e,t,r){const n=parseFloat(e);if(isNaN(n))throw new a.eS(a.f.InvalidOperator);return W(n,t,r)}(t,r,e);if(M(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(P(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(D(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(_(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(F(r))return function(e,t,r){throw new a.eS(a.f.InvalidOperator)}();if(A(r))return function(e,t,r){if("+"===r)return e+t;throw new a.eS(a.f.InvalidOperator)}(t,r,e);throw new a.eS(a.f.InvalidOperator)}throw new a.eS(a.f.InvalidOperator)}function W(e,t,r){switch(r){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t}throw new a.eS(a.f.InvalidOperator)}r(58340);var K,X,ee={exports:{}};X=function(){function e(t,r,n,a){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,e.prototype),i.expected=r,i.found=n,i.location=a,i.name="SyntaxError",i}function t(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.prototype.format=function(e){var r="Error: "+this.message;if(this.location){var n,a=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){a=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(a){var u=this.location.end,l=t("",s.line.toString().length," "),c=a[i.line-1],f=(i.line===u.line?u.column:c.length+1)-i.column||1;r+="\n --\x3e "+o+"\n"+l+" |\n"+s.line+" | "+c+"\n"+l+" | "+t("",i.column-1," ")+t("",f,"^")}else r+="\n at "+o}return r},e.buildMessage=function(e,t){var r={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function s(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(s);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,r){var n,a={},i=(r=void 0!==r?r:{}).grammarSource,s={start:tt},o=tt,u="''",l=/^[A-Za-z_\x80-\uFFFF]/,c=/^[A-Za-z0-9_]/,f=/^[A-Za-z0-9_.\x80-\uFFFF]/,d=/^["]/,p=/^[^']/,v=/^[0-9]/,h=/^[eE]/,m=/^[+\-]/,w=/^[ \t\n\r]/,I=/^[^`]/,S=je("!",!1),g=je("=",!1),y=je(">=",!1),T=je(">",!1),N=je("<=",!1),O=je("<>",!1),C=je("<",!1),x=je("!=",!1),b=je("+",!1),A=je("-",!1),M=je("||",!1),E=je("*",!1),F=je("/",!1),D=Ge([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),P=Ge([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),_=Ge([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),L=Ge(['"'],!1,!1),R=je("@",!1),U=je("'",!1),V=je("N'",!1),J=je("''",!1),$=Ge(["'"],!0,!1),H=je(".",!1),k=Ge([["0","9"]],!1,!1),Z=Ge(["e","E"],!1,!1),z=Ge(["+","-"],!1,!1),q=je("NULL",!0),Y=je("TRUE",!0),B=je("FALSE",!0),Q=je("IN",!0),j=je("IS",!0),G=je("LIKE",!0),W=je("ESCAPE",!0),K=je("NOT",!0),X=je("AND",!0),ee=je("OR",!0),te=je("BETWEEN",!0),re=je("FROM",!0),ne=je("FOR",!0),ae=je("SUBSTRING",!0),ie=je("EXTRACT",!0),se=je("TRIM",!0),oe=je("POSITION",!0),ue=je("TIMESTAMP",!0),le=je("DATE",!0),ce=je("TIME",!0),fe=je("LEADING",!0),de=je("TRAILING",!0),pe=je("BOTH",!0),ve=je("CAST",!0),he=je("AS",!0),me=je("INTEGER",!0),we=je("SMALLINT",!0),Ie=je("FLOAT",!0),Se=je("REAL",!0),ge=je("VARCHAR",!0),ye=je("TO",!0),Te=je("INTERVAL",!0),Ne=je("YEAR",!0),Oe=je("TIMEZONE_HOUR",!0),Ce=je("TIMEZONE_MINUTE",!0),xe=je("MONTH",!0),be=je("DAY",!0),Ae=je("HOUR",!0),Me=je("MINUTE",!0),Ee=je("SECOND",!0),Fe=je("CASE",!0),De=je("END",!0),Pe=je("WHEN",!0),_e=je("THEN",!0),Le=je("ELSE",!0),Re=je(",",!1),Ue=je("(",!1),Ve=je(")",!1),Je=Ge([" ","\t","\n","\r"],!1,!1),$e=je("`",!1),He=Ge(["`"],!0,!1),ke=0,Ze=0,ze=[{line:1,column:1}],qe=0,Ye=[],Be=0;if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=s[r.startRule]}function Qe(e,t){throw et(e,t=void 0!==t?t:Ke(Ze,ke))}function je(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ge(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function We(e){var r,n=ze[e];if(n)return n;for(r=e-1;!ze[r];)r--;for(n={line:(n=ze[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ze[e]=n,n}function Ke(e,t,r){var n=We(e),a=We(t),s={source:i,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:a.line,column:a.column}};return r&&i&&"function"==typeof i.offset&&(s.start=i.offset(s.start),s.end=i.offset(s.end)),s}function Xe(e){ke<qe||(ke>qe&&(qe=ke,Ye=[]),Ye.push(e))}function et(t,r){return new e(t,null,null,r)}function tt(){var e,t;return e=ke,Pr(),(t=nt())!==a?(Pr(),Ze=e,e=t):(ke=e,e=a),e}function rt(){var e,t,r,n,i,s,o,u;if(e=ke,(t=nt())!==a){for(r=[],n=ke,i=Pr(),(s=Er())!==a?(o=Pr(),(u=nt())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);n!==a;)r.push(n),n=ke,i=Pr(),(s=Er())!==a?(o=Pr(),(u=nt())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);Ze=e,e=function(e,t){var r={type:"expression-list"},n=function(e,t,r){return function(e,t){for(var r=[e],n=0;n<t.length;n++)r.push(t[n][3]);return r}(e,t)}(e,t);return r.value=n,r}(t,r)}else ke=e,e=a;return e}function nt(){var e,t,r,n,i,s,o,u;if(e=ke,(t=at())!==a){for(r=[],n=ke,i=Pr(),(s=Qt())!==a?(o=Pr(),(u=at())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);n!==a;)r.push(n),n=ke,i=Pr(),(s=Qt())!==a?(o=Pr(),(u=at())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);Ze=e,e=function(e,t){return Ur(e,t)}(t,r)}else ke=e,e=a;return e}function at(){var e,t,r,n,i,s,o,u;if(e=ke,(t=it())!==a){for(r=[],n=ke,i=Pr(),(s=Bt())!==a?(o=Pr(),(u=it())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);n!==a;)r.push(n),n=ke,i=Pr(),(s=Bt())!==a?(o=Pr(),(u=it())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);Ze=e,e=function(e,t){return Ur(e,t)}(t,r)}else ke=e,e=a;return e}function it(){var e,r,n,i,s;return e=ke,(r=Yt())===a&&(r=ke,33===t.charCodeAt(ke)?(n="!",ke++):(n=a,0===Be&&Xe(S)),n!==a?(i=ke,Be++,61===t.charCodeAt(ke)?(s="=",ke++):(s=a,0===Be&&Xe(g)),Be--,s===a?i=void 0:(ke=i,i=a),i!==a?r=n=[n,i]:(ke=r,r=a)):(ke=r,r=a)),r!==a?(n=Pr(),(i=it())!==a?(Ze=e,e=function(e){return function(e,t){return{type:"unary-expression",operator:"NOT",expr:t}}(0,e)}(i)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=function(){var e,t,r;return e=ke,(t=lt())!==a?(Pr(),(r=function(){var e;return(e=function(){var e,t,r,n,i,s,o;if(e=ke,t=[],r=ke,n=Pr(),(i=st())!==a?(s=Pr(),(o=lt())!==a?r=n=[n,i,s,o]:(ke=r,r=a)):(ke=r,r=a),r!==a)for(;r!==a;)t.push(r),r=ke,n=Pr(),(i=st())!==a?(s=Pr(),(o=lt())!==a?r=n=[n,i,s,o]:(ke=r,r=a)):(ke=r,r=a);else t=a;return t!==a&&(Ze=e,t=function(e){return{type:"arithmetic",tail:e}}(t)),t}())===a&&(e=function(){var e,t,r,n;return e=ke,(t=ut())!==a?(Pr(),(r=Fr())!==a?(Pr(),(n=rt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{op:e,right:t}}(t,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=ut())!==a?(Pr(),(r=Fr())!==a?(Pr(),(n=Dr())!==a?(Ze=e,e=function(e){return{op:e,right:{type:"expression-list",value:[]}}}(t)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=ut())!==a?(Pr(),(r=yt())!==a?(Ze=e,e=function(e,t){return{op:e,right:t}}(t,r)):(ke=e,e=a)):(ke=e,e=a))),e}())===a&&(e=function(){var e,t,r,n,i,s;return e=ke,(t=Yt())!==a?(Pr(),(r=jt())!==a?(Pr(),(n=lt())!==a?(Pr(),(i=Bt())!==a?(Pr(),(s=lt())!==a?(Ze=e,e=function(e,t,r){return{op:"NOT"+e,right:{type:"expression-list",value:[t,r]}}}(r,n,s)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=jt())!==a?(Pr(),(r=lt())!==a?(Pr(),(n=Bt())!==a?(Pr(),(i=lt())!==a?(Ze=e,e=function(e,t,r){return{op:e,right:{type:"expression-list",value:[t,r]}}}(t,r,i)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)),e}())===a&&(e=function(){var e,t,r,n;return e=ke,(t=Zt())!==a?(Pr(),(r=Yt())!==a?(Pr(),(n=lt())!==a?(Ze=e,e=function(e,t){return{op:e+"NOT",right:t}}(t,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Zt())!==a?(Pr(),(r=lt())!==a?(Ze=e,e=function(e,t){return{op:e,right:t}}(t,r)):(ke=e,e=a)):(ke=e,e=a)),e}())===a&&(e=function(){var e,t,r,n;return e=ke,(t=ot())!==a?(Pr(),(r=At())!==a?(Pr(),qt()!==a?(Pr(),(n=Mt())!==a?(Ze=e,e=function(e,t,r){return{op:e,right:t,escape:r.value}}(t,r,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=ot())!==a?(Pr(),(r=At())!==a?(Ze=e,e=function(e,t){return{op:e,right:t,escape:""}}(t,r)):(ke=e,e=a)):(ke=e,e=a)),e}()),e}())===a&&(r=null),Ze=e,e=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?Ur(e,t.tail):Rr(t.op,e,t.right,t.escape)}(t,r)):(ke=e,e=a),e}()),e}function st(){var e;return">="===t.substr(ke,2)?(e=">=",ke+=2):(e=a,0===Be&&Xe(y)),e===a&&(62===t.charCodeAt(ke)?(e=">",ke++):(e=a,0===Be&&Xe(T)),e===a&&("<="===t.substr(ke,2)?(e="<=",ke+=2):(e=a,0===Be&&Xe(N)),e===a&&("<>"===t.substr(ke,2)?(e="<>",ke+=2):(e=a,0===Be&&Xe(O)),e===a&&(60===t.charCodeAt(ke)?(e="<",ke++):(e=a,0===Be&&Xe(C)),e===a&&(61===t.charCodeAt(ke)?(e="=",ke++):(e=a,0===Be&&Xe(g)),e===a&&("!="===t.substr(ke,2)?(e="!=",ke+=2):(e=a,0===Be&&Xe(x)))))))),e}function ot(){var e,t,r,n,i;return e=ke,t=ke,(r=Yt())!==a?(n=Pr(),(i=zt())!==a?t=r=[r,n,i]:(ke=t,t=a)):(ke=t,t=a),t!==a&&(Ze=e,t=function(e){return e[0]+" "+e[2]}(t)),(e=t)===a&&(e=zt()),e}function ut(){var e,t,r,n,i;return e=ke,t=ke,(r=Yt())!==a?(n=Pr(),(i=kt())!==a?t=r=[r,n,i]:(ke=t,t=a)):(ke=t,t=a),t!==a&&(Ze=e,t=function(e){return e[0]+" "+e[2]}(t)),(e=t)===a&&(e=kt()),e}function lt(){var e,t,r,n,i,s,o,u;if(e=ke,(t=ft())!==a){for(r=[],n=ke,i=Pr(),(s=ct())!==a?(o=Pr(),(u=ft())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);n!==a;)r.push(n),n=ke,i=Pr(),(s=ct())!==a?(o=Pr(),(u=ft())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);Ze=e,e=function(e,t){return Ur(e,t)}(t,r)}else ke=e,e=a;return e}function ct(){var e;return 43===t.charCodeAt(ke)?(e="+",ke++):(e=a,0===Be&&Xe(b)),e===a&&(45===t.charCodeAt(ke)?(e="-",ke++):(e=a,0===Be&&Xe(A)),e===a&&("||"===t.substr(ke,2)?(e="||",ke+=2):(e=a,0===Be&&Xe(M)))),e}function ft(){var e,t,r,n,i,s,o,u;if(e=ke,(t=pt())!==a){for(r=[],n=ke,i=Pr(),(s=dt())!==a?(o=Pr(),(u=pt())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);n!==a;)r.push(n),n=ke,i=Pr(),(s=dt())!==a?(o=Pr(),(u=pt())!==a?n=i=[i,s,o,u]:(ke=n,n=a)):(ke=n,n=a);Ze=e,e=function(e,t){return Ur(e,t)}(t,r)}else ke=e,e=a;return e}function dt(){var e;return 42===t.charCodeAt(ke)?(e="*",ke++):(e=a,0===Be&&Xe(E)),e===a&&(47===t.charCodeAt(ke)?(e="/",ke++):(e=a,0===Be&&Xe(F))),e}function pt(){var e,t;return(e=function(){var e;return(e=Mt())===a&&(e=function(){var e,t,r,n;return e=ke,(t=function(){var e,t,r,n;return e=ke,(t=Pt())!==a&&(r=_t())!==a&&(n=Lt())!==a?(Ze=e,e=function(e,t,r){return parseFloat(e+t+r)}(t,r,n)):(ke=e,e=a),e===a&&(e=ke,(t=Pt())!==a&&(r=_t())!==a?(Ze=e,e=function(e,t){return parseFloat(e+t)}(t,r)):(ke=e,e=a),e===a&&(e=ke,(t=Pt())!==a&&(r=Lt())!==a?(Ze=e,e=function(e,t){return parseFloat(e+t)}(t,r)):(ke=e,e=a),e===a&&(e=ke,(t=Pt())!==a&&(Ze=e,t=function(e){return parseFloat(e)}(t)),e=t))),e}())!==a?(r=ke,Be++,n=ht(),Be--,n===a?r=void 0:(ke=r,r=a),r!==a?(Ze=e,e=function(e){return{type:"number",value:e}}(t)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e,t;return e=ke,(t=$t())!==a&&(Ze=e,t={type:"boolean",value:!0}),(e=t)===a&&(e=ke,(t=Ht())!==a&&(Ze=e,t={type:"boolean",value:!1}),e=t),e}())===a&&(e=function(){var e,t;return e=ke,(t=Jt())!==a&&(Ze=e,t={type:"null",value:null}),t}())===a&&(e=function(){var e,t;return e=ke,nr()!==a?(Pr(),(t=At())!==a?(Ze=e,e=function(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&Qe("Date literal is invalid")}(e.value),{type:"date",value:e.value}}(t)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e,t;return e=ke,rr()!==a?(Pr(),(t=At())!==a?(Ze=e,e=function(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&Qe("Timestamp literal is invalid")}(e.value),{type:"timestamp",value:e.value}}(t)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=Nt())===a&&(e=function(){var e,t;return e=ke,ar()!==a?(Pr(),(t=At())!==a?(Ze=e,e=function(e){return"string"===e.type&&function(e){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)&&Qe("Time literal is invalid")}(e.value),{type:"time",value:e.value}}(t)):(ke=e,e=a)):(ke=e,e=a),e}()),e}())===a&&(e=function(){var e,t,r;return e=ke,Xt()!==a?(Pr(),Fr()!==a?(Pr(),(t=function(){var e;return(e=wr())===a&&(e=gr())===a&&(e=yr())===a&&(e=Tr())===a&&(e=Nr())===a&&(e=Or())===a&&(e=Ir())===a&&(e=Sr()),e}())!==a?(Pr(),Gt()!==a?(Pr(),(r=nt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},t]}}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e,t,r,n,i,s,o;return e=ke,Kt()!==a?(Pr(),Fr()!==a?(Pr(),(t=nt())!==a?(Pr(),Gt()!==a?(Pr(),(r=nt())!==a?(Pr(),n=ke,(i=Wt())!==a?(s=Pr(),(o=nt())!==a?n=i=[i,s,o,Pr()]:(ke=n,n=a)):(ke=n,n=a),n===a&&(n=null),(i=Dr())!==a?(Ze=e,e=function(e,t,r){return{type:"function",name:"substring",args:{type:"expression-list",value:r?[e,t,r[2]]:[e,t]}}}(t,r,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e,t,r,n;return e=ke,er()!==a?(Pr(),Fr()!==a?(Pr(),(t=Tt())===a&&(t=null),Pr(),(r=nt())!==a?(Pr(),Gt()!==a?(Pr(),(n=nt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t,r){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},t,r]}}}(t,r,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,er()!==a?(Pr(),Fr()!==a?(Pr(),(t=Tt())===a&&(t=null),Pr(),(r=nt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},t]}}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)),e}())===a&&(e=function(){var e,t,r;return e=ke,tr()!==a?(Pr(),Fr()!==a?(Pr(),(t=nt())!==a?(Pr(),kt()!==a?(Pr(),(r=nt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"function",name:"position",args:{type:"expression-list",value:[e,t]}}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e,t,r;return e=ke,ur()!==a?(Pr(),Fr()!==a?(Pr(),(t=nt())!==a?(Pr(),lr()!==a?(Pr(),(r=function(){var e,t,r;return e=ke,(t=cr())!==a&&(Ze=e,t={type:"data-type",value:{type:"integer"}}),(e=t)===a&&(e=ke,(t=fr())!==a&&(Ze=e,t={type:"data-type",value:{type:"smallint"}}),(e=t)===a&&(e=ke,(t=dr())!==a&&(Ze=e,t={type:"data-type",value:{type:"float"}}),(e=t)===a&&(e=ke,(t=pr())!==a&&(Ze=e,t={type:"data-type",value:{type:"real"}}),(e=t)===a&&(e=ke,(t=nr())!==a&&(Ze=e,t={type:"data-type",value:{type:"date"}}),(e=t)===a&&(e=ke,(t=rr())!==a&&(Ze=e,t={type:"data-type",value:{type:"timestamp"}}),(e=t)===a&&(e=ke,(t=ar())!==a&&(Ze=e,t={type:"data-type",value:{type:"time"}}),(e=t)===a&&(e=ke,(t=vr())!==a?(Pr(),Fr()!==a?(Pr(),(r=Rt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e){return{type:"data-type",value:{type:"varchar",size:parseInt(e)}}}(r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)))))))),e}())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"function",name:"cast",args:{type:"expression-list",value:[e,t]}}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e,t,r;return e=ke,(t=Lr())!==a?(Pr(),Fr()!==a?(Pr(),(r=rt())===a&&(r=null),Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"function",name:e,args:t||{type:"expression-list",value:[]}}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}())===a&&(e=function(){var e;return(e=function(){var e,t,r,n,i;if(e=ke,Cr()!==a)if(Pr(),(t=nt())!==a){for(Pr(),r=[],n=Ft();n!==a;)r.push(n),n=Ft();n=Pr(),(i=xr())!==a?(Ze=e,e=function(e,t){return{type:"case-expression",format:"simple",operand:e,clauses:t,else:null}}(t,r)):(ke=e,e=a)}else ke=e,e=a;else ke=e,e=a;if(e===a)if(e=ke,Cr()!==a)if(Pr(),(t=nt())!==a){for(Pr(),r=[],n=Ft();n!==a;)r.push(n),n=Ft();n=Pr(),(i=Dt())!==a?(Pr(),xr()!==a?(Ze=e,e=function(e,t,r){return{type:"case-expression",format:"simple",operand:e,clauses:t,else:r.value}}(t,r,i)):(ke=e,e=a)):(ke=e,e=a)}else ke=e,e=a;else ke=e,e=a;return e}())===a&&(e=function(){var e,t,r,n;if(e=ke,Cr()!==a){for(Pr(),t=[],r=Et();r!==a;)t.push(r),r=Et();r=Pr(),(n=xr())!==a?(Ze=e,e=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}}(t)):(ke=e,e=a)}else ke=e,e=a;if(e===a)if(e=ke,Cr()!==a){for(Pr(),t=[],r=Et();r!==a;)t.push(r),r=Et();r=Pr(),(n=Dt())!==a?(Pr(),xr()!==a?(Ze=e,e=function(e,t){return{type:"case-expression",format:"searched",clauses:e,else:t.value}}(t,n)):(ke=e,e=a)):(ke=e,e=a)}else ke=e,e=a;return e}()),e}())===a&&(e=function(){var e,t;return e=ke,(t=function(){var e,t;return e=ke,(t=function(){var e,t,r,n;if(e=ke,(t=ht())!==a){for(r=[],n=wt();n!==a;)r.push(n),n=wt();Ze=e,e=function(e,t){return e+t.join("")}(t,r)}else ke=e,e=a;return e}())!==a&&(Ze=e),t}())!==a&&(Ze=e,t=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}}(t)),(e=t)===a&&(e=ke,(t=function(){var e,t;return e=ke,gt()!==a?(t=function(){var e,t,r;for(e=ke,t=[],r=It();r!==a;)t.push(r),r=It();return Ze=e,function(e){return e.join("")}(t)}(),gt()!==a?(Ze=e,e=t):(ke=e,e=a)):(ke=e,e=a),e}())!==a&&(Ze=e,t=function(e){return{type:"column-reference",table:"",column:e,delimited:!0}}(t)),e=t),e}())===a&&(e=yt())===a&&(e=ke,Fr()!==a?(Pr(),(t=nt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e){return e.paren=!0,e}(t)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)),e}function vt(){var e,t,r,n;if(e=ke,(t=ht())!==a){for(r=[],n=mt();n!==a;)r.push(n),n=mt();Ze=e,e=function(e,t){return e+t.join("")}(t,r)}else ke=e,e=a;return e}function ht(){var e;return l.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(D)),e}function mt(){var e;return c.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(P)),e}function wt(){var e;return f.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(_)),e}function It(){var e;return(e=St())===a&&(e=function(){var e;return e=ke,gt()!==a&&gt()!==a?(Ze=e,e='"'):(ke=e,e=a),e}()),e}function St(){var e;return f.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(_)),e}function gt(){var e;return d.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(L)),e}function yt(){var e,r,n,i;return e=ke,r=ke,64===t.charCodeAt(ke)?(n="@",ke++):(n=a,0===Be&&Xe(R)),n!==a&&(i=vt())!==a?r=n=[n,i]:(ke=r,r=a),r!==a&&(Ze=e,r=function(e){return{type:"parameter",value:e[1]}}(r)),r}function Tt(){var e;return(e=ir())===a&&(e=sr())===a&&(e=or()),e}function Nt(){var e,r,n,i;return e=ke,mr()!==a?(Pr(),45===t.charCodeAt(ke)?(r="-",ke++):(r=a,0===Be&&Xe(A)),r===a&&(43===t.charCodeAt(ke)?(r="+",ke++):(r=a,0===Be&&Xe(b))),r!==a?(Pr(),(n=At())!==a?(Pr(),(i=Ot())!==a?(Ze=e,e=function(e,t,r){return{type:"interval",value:t,qualifier:r,op:e}}(r,n,i)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,mr()!==a?(Pr(),(r=At())!==a?(Pr(),(n=Ot())!==a?(Ze=e,e=function(e,t){return{type:"interval",value:e,qualifier:t,op:""}}(r,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)),e}function Ot(){var e,t,r;return e=ke,(t=function(){var e,t,r;return e=ke,(t=Ct())!==a?(Pr(),Fr()!==a?(Pr(),(r=bt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"interval-period",period:e.value,precision:t,secondary:null}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Ct())!==a&&(Ze=e,t=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}}(t)),e=t),e}())!==a?(Pr(),hr()!==a?(Pr(),(r=function(){var e,t,r,n;return e=ke,(t=Ct())!==a&&(Ze=e,t=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}}(t)),(e=t)===a&&(e=ke,(t=Or())!==a?(Pr(),Fr()!==a?(Pr(),(r=bt())!==a?(Pr(),Er()!==a?(Pr(),(n=xt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"interval-period",period:"second",precision:e,secondary:t}}(r,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Or())!==a?(Pr(),Fr()!==a?(Pr(),(r=bt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}}(r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Or())!==a&&(Ze=e,t={type:"interval-period",period:"second",precision:null,secondary:null}),e=t))),e}())!==a?(Ze=e,e=function(e,t){return{type:"interval-qualifier",start:e,end:t}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=function(){var e,t,r,n;return e=ke,(t=Ct())!==a?(Pr(),Fr()!==a?(Pr(),(r=xt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"interval-period",period:e.value,precision:t,secondary:null}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Ct())!==a&&(Ze=e,t=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}}(t)),(e=t)===a&&(e=ke,(t=Or())!==a?(Pr(),Fr()!==a?(Pr(),(r=bt())!==a?(Pr(),Er()!==a?(Pr(),(n=xt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e,t){return{type:"interval-period",period:"second",precision:e,secondary:t}}(r,n)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Or())!==a?(Pr(),Fr()!==a?(Pr(),(r=xt())!==a?(Pr(),Dr()!==a?(Ze=e,e=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}}(r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e===a&&(e=ke,(t=Or())!==a&&(Ze=e,t={type:"interval-period",period:"second",precision:null,secondary:null}),e=t)))),e}()),e}function Ct(){var e,t;return e=ke,(t=yr())!==a&&(Ze=e,t={type:"string",value:"day"}),(e=t)===a&&(e=ke,(t=Tr())!==a&&(Ze=e,t={type:"string",value:"hour"}),(e=t)===a&&(e=ke,(t=Nr())!==a&&(Ze=e,t={type:"string",value:"minute"}),(e=t)===a&&(e=ke,(t=gr())!==a&&(Ze=e,t={type:"string",value:"month"}),(e=t)===a&&(e=ke,(t=wr())!==a&&(Ze=e,t={type:"string",value:"year"}),e=t)))),e}function xt(){var e,t;return e=ke,(t=Rt())!==a&&(Ze=e,t=function(e){return parseFloat(e)}(t)),t}function bt(){var e,t;return e=ke,(t=Rt())!==a&&(Ze=e,t=function(e){return parseFloat(e)}(t)),t}function At(){var e;return(e=Mt())===a&&(e=yt()),e}function Mt(){var e,r,n,i,s;if(e=ke,39===t.charCodeAt(ke)?(r="'",ke++):(r=a,0===Be&&Xe(U)),r===a&&("N'"===t.substr(ke,2)?(r="N'",ke+=2):(r=a,0===Be&&Xe(V))),r!==a){for(n=[],i=ke,t.substr(ke,2)===u?(s=u,ke+=2):(s=a,0===Be&&Xe(J)),s!==a&&(Ze=i,s="'"),(i=s)===a&&(p.test(t.charAt(ke))?(i=t.charAt(ke),ke++):(i=a,0===Be&&Xe($)));i!==a;)n.push(i),i=ke,t.substr(ke,2)===u?(s=u,ke+=2):(s=a,0===Be&&Xe(J)),s!==a&&(Ze=i,s="'"),(i=s)===a&&(p.test(t.charAt(ke))?(i=t.charAt(ke),ke++):(i=a,0===Be&&Xe($)));39===t.charCodeAt(ke)?(i="'",ke++):(i=a,0===Be&&Xe(U)),i!==a?(Ze=e,e=function(e){return{type:"string",value:e.join("")}}(n)):(ke=e,e=a)}else ke=e,e=a;return e}function Et(){var e,t,r;return e=ke,br()!==a?(Pr(),(t=nt())!==a?(Pr(),Ar()!==a?(Pr(),(r=nt())!==a?(Ze=e,e=function(e,t){return{type:"when-clause",operand:e,value:t}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}function Ft(){var e,t,r;return e=ke,br()!==a?(Pr(),(t=nt())!==a?(Pr(),Ar()!==a?(Pr(),(r=nt())!==a?(Ze=e,e=function(e,t){return{type:"when-clause",operand:e,value:t}}(t,r)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a)):(ke=e,e=a),e}function Dt(){var e,t;return e=ke,Mr()!==a?(Pr(),(t=nt())!==a?(Ze=e,e=function(e){return{type:"else-clause",value:e}}(t)):(ke=e,e=a)):(ke=e,e=a),e}function Pt(){var e,r,n;return(e=Rt())===a&&(e=ke,45===t.charCodeAt(ke)?(r="-",ke++):(r=a,0===Be&&Xe(A)),r===a&&(43===t.charCodeAt(ke)?(r="+",ke++):(r=a,0===Be&&Xe(b))),r!==a&&(n=Rt())!==a?(Ze=e,e=function(e,t){return e[0]+t}(r,n)):(ke=e,e=a)),e}function _t(){var e,r,n;return e=ke,46===t.charCodeAt(ke)?(r=".",ke++):(r=a,0===Be&&Xe(H)),r!==a?((n=Rt())===a&&(n=null),Ze=e,e=function(e){return"."+(null!=e?e:"")}(n)):(ke=e,e=a),e}function Lt(){var e,t,r;return e=ke,(t=Vt())!==a&&(r=Rt())!==a?(Ze=e,e=function(e,t){return e+t}(t,r)):(ke=e,e=a),e}function Rt(){var e,t,r;if(e=ke,t=[],(r=Ut())!==a)for(;r!==a;)t.push(r),r=Ut();else t=a;return t!==a&&(Ze=e,t=function(e){return e.join("")}(t)),t}function Ut(){var e;return v.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(k)),e}function Vt(){var e,r,n;return e=ke,h.test(t.charAt(ke))?(r=t.charAt(ke),ke++):(r=a,0===Be&&Xe(Z)),r!==a?(m.test(t.charAt(ke))?(n=t.charAt(ke),ke++):(n=a,0===Be&&Xe(z)),n===a&&(n=null),Ze=e,e=function(e,t){return"e"+(null===t?"":t)}(0,n)):(ke=e,e=a),e}function Jt(){var e,r,n,i;return e=ke,"null"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(q)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?e=r=[r,n]:(ke=e,e=a)):(ke=e,e=a),e}function $t(){var e,r,n,i;return e=ke,"true"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Y)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?e=r=[r,n]:(ke=e,e=a)):(ke=e,e=a),e}function Ht(){var e,r,n,i;return e=ke,"false"===t.substr(ke,5).toLowerCase()?(r=t.substr(ke,5),ke+=5):(r=a,0===Be&&Xe(B)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?e=r=[r,n]:(ke=e,e=a)):(ke=e,e=a),e}function kt(){var e,r,n,i;return e=ke,"in"===t.substr(ke,2).toLowerCase()?(r=t.substr(ke,2),ke+=2):(r=a,0===Be&&Xe(Q)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="IN"):(ke=e,e=a)):(ke=e,e=a),e}function Zt(){var e,r,n,i;return e=ke,"is"===t.substr(ke,2).toLowerCase()?(r=t.substr(ke,2),ke+=2):(r=a,0===Be&&Xe(j)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="IS"):(ke=e,e=a)):(ke=e,e=a),e}function zt(){var e,r,n,i;return e=ke,"like"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(G)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="LIKE"):(ke=e,e=a)):(ke=e,e=a),e}function qt(){var e,r,n,i;return e=ke,"escape"===t.substr(ke,6).toLowerCase()?(r=t.substr(ke,6),ke+=6):(r=a,0===Be&&Xe(W)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="ESCAPE"):(ke=e,e=a)):(ke=e,e=a),e}function Yt(){var e,r,n,i;return e=ke,"not"===t.substr(ke,3).toLowerCase()?(r=t.substr(ke,3),ke+=3):(r=a,0===Be&&Xe(K)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="NOT"):(ke=e,e=a)):(ke=e,e=a),e}function Bt(){var e,r,n,i;return e=ke,"and"===t.substr(ke,3).toLowerCase()?(r=t.substr(ke,3),ke+=3):(r=a,0===Be&&Xe(X)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="AND"):(ke=e,e=a)):(ke=e,e=a),e}function Qt(){var e,r,n,i;return e=ke,"or"===t.substr(ke,2).toLowerCase()?(r=t.substr(ke,2),ke+=2):(r=a,0===Be&&Xe(ee)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="OR"):(ke=e,e=a)):(ke=e,e=a),e}function jt(){var e,r,n,i;return e=ke,"between"===t.substr(ke,7).toLowerCase()?(r=t.substr(ke,7),ke+=7):(r=a,0===Be&&Xe(te)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="BETWEEN"):(ke=e,e=a)):(ke=e,e=a),e}function Gt(){var e,r,n,i;return e=ke,"from"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(re)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="FROM"):(ke=e,e=a)):(ke=e,e=a),e}function Wt(){var e,r,n,i;return e=ke,"for"===t.substr(ke,3).toLowerCase()?(r=t.substr(ke,3),ke+=3):(r=a,0===Be&&Xe(ne)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="FOR"):(ke=e,e=a)):(ke=e,e=a),e}function Kt(){var e,r,n,i;return e=ke,"substring"===t.substr(ke,9).toLowerCase()?(r=t.substr(ke,9),ke+=9):(r=a,0===Be&&Xe(ae)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="SUBSTRING"):(ke=e,e=a)):(ke=e,e=a),e}function Xt(){var e,r,n,i;return e=ke,"extract"===t.substr(ke,7).toLowerCase()?(r=t.substr(ke,7),ke+=7):(r=a,0===Be&&Xe(ie)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="EXTRACT"):(ke=e,e=a)):(ke=e,e=a),e}function er(){var e,r,n,i;return e=ke,"trim"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(se)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TRIM"):(ke=e,e=a)):(ke=e,e=a),e}function tr(){var e,r,n,i;return e=ke,"position"===t.substr(ke,8).toLowerCase()?(r=t.substr(ke,8),ke+=8):(r=a,0===Be&&Xe(oe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="POSITION"):(ke=e,e=a)):(ke=e,e=a),e}function rr(){var e,r,n,i;return e=ke,"timestamp"===t.substr(ke,9).toLowerCase()?(r=t.substr(ke,9),ke+=9):(r=a,0===Be&&Xe(ue)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TIMESTAMP"):(ke=e,e=a)):(ke=e,e=a),e}function nr(){var e,r,n,i;return e=ke,"date"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(le)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="DATE"):(ke=e,e=a)):(ke=e,e=a),e}function ar(){var e,r,n,i;return e=ke,"time"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(ce)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TIME"):(ke=e,e=a)):(ke=e,e=a),e}function ir(){var e,r,n,i;return e=ke,"leading"===t.substr(ke,7).toLowerCase()?(r=t.substr(ke,7),ke+=7):(r=a,0===Be&&Xe(fe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="LEADING"):(ke=e,e=a)):(ke=e,e=a),e}function sr(){var e,r,n,i;return e=ke,"trailing"===t.substr(ke,8).toLowerCase()?(r=t.substr(ke,8),ke+=8):(r=a,0===Be&&Xe(de)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TRAILING"):(ke=e,e=a)):(ke=e,e=a),e}function or(){var e,r,n,i;return e=ke,"both"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(pe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="BOTH"):(ke=e,e=a)):(ke=e,e=a),e}function ur(){var e,r,n,i;return e=ke,"cast"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(ve)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="CAST"):(ke=e,e=a)):(ke=e,e=a),e}function lr(){var e,r,n,i;return e=ke,"as"===t.substr(ke,2).toLowerCase()?(r=t.substr(ke,2),ke+=2):(r=a,0===Be&&Xe(he)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="AS"):(ke=e,e=a)):(ke=e,e=a),e}function cr(){var e,r,n,i;return e=ke,"integer"===t.substr(ke,7).toLowerCase()?(r=t.substr(ke,7),ke+=7):(r=a,0===Be&&Xe(me)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="INTEGER"):(ke=e,e=a)):(ke=e,e=a),e}function fr(){var e,r,n,i;return e=ke,"smallint"===t.substr(ke,8).toLowerCase()?(r=t.substr(ke,8),ke+=8):(r=a,0===Be&&Xe(we)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="SMALLINT"):(ke=e,e=a)):(ke=e,e=a),e}function dr(){var e,r,n,i;return e=ke,"float"===t.substr(ke,5).toLowerCase()?(r=t.substr(ke,5),ke+=5):(r=a,0===Be&&Xe(Ie)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="FLOAT"):(ke=e,e=a)):(ke=e,e=a),e}function pr(){var e,r,n,i;return e=ke,"real"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Se)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="REAL"):(ke=e,e=a)):(ke=e,e=a),e}function vr(){var e,r,n,i;return e=ke,"varchar"===t.substr(ke,7).toLowerCase()?(r=t.substr(ke,7),ke+=7):(r=a,0===Be&&Xe(ge)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="VARCHAR"):(ke=e,e=a)):(ke=e,e=a),e}function hr(){var e,r,n,i;return e=ke,"to"===t.substr(ke,2).toLowerCase()?(r=t.substr(ke,2),ke+=2):(r=a,0===Be&&Xe(ye)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TO"):(ke=e,e=a)):(ke=e,e=a),e}function mr(){var e,r,n,i;return e=ke,"interval"===t.substr(ke,8).toLowerCase()?(r=t.substr(ke,8),ke+=8):(r=a,0===Be&&Xe(Te)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="INTERVAL"):(ke=e,e=a)):(ke=e,e=a),e}function wr(){var e,r,n,i;return e=ke,"year"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Ne)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="YEAR"):(ke=e,e=a)):(ke=e,e=a),e}function Ir(){var e,r,n,i;return e=ke,"timezone_hour"===t.substr(ke,13).toLowerCase()?(r=t.substr(ke,13),ke+=13):(r=a,0===Be&&Xe(Oe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TIMEZONE_HOUR"):(ke=e,e=a)):(ke=e,e=a),e}function Sr(){var e,r,n,i;return e=ke,"timezone_minute"===t.substr(ke,15).toLowerCase()?(r=t.substr(ke,15),ke+=15):(r=a,0===Be&&Xe(Ce)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="TIMEZONE_MINUTE"):(ke=e,e=a)):(ke=e,e=a),e}function gr(){var e,r,n,i;return e=ke,"month"===t.substr(ke,5).toLowerCase()?(r=t.substr(ke,5),ke+=5):(r=a,0===Be&&Xe(xe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="MONTH"):(ke=e,e=a)):(ke=e,e=a),e}function yr(){var e,r,n,i;return e=ke,"day"===t.substr(ke,3).toLowerCase()?(r=t.substr(ke,3),ke+=3):(r=a,0===Be&&Xe(be)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="DAY"):(ke=e,e=a)):(ke=e,e=a),e}function Tr(){var e,r,n,i;return e=ke,"hour"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Ae)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="HOUR"):(ke=e,e=a)):(ke=e,e=a),e}function Nr(){var e,r,n,i;return e=ke,"minute"===t.substr(ke,6).toLowerCase()?(r=t.substr(ke,6),ke+=6):(r=a,0===Be&&Xe(Me)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="MINUTE"):(ke=e,e=a)):(ke=e,e=a),e}function Or(){var e,r,n,i;return e=ke,"second"===t.substr(ke,6).toLowerCase()?(r=t.substr(ke,6),ke+=6):(r=a,0===Be&&Xe(Ee)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="SECOND"):(ke=e,e=a)):(ke=e,e=a),e}function Cr(){var e,r,n,i;return e=ke,"case"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Fe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="CASE"):(ke=e,e=a)):(ke=e,e=a),e}function xr(){var e,r,n,i;return e=ke,"end"===t.substr(ke,3).toLowerCase()?(r=t.substr(ke,3),ke+=3):(r=a,0===Be&&Xe(De)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="END"):(ke=e,e=a)):(ke=e,e=a),e}function br(){var e,r,n,i;return e=ke,"when"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Pe)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="WHEN"):(ke=e,e=a)):(ke=e,e=a),e}function Ar(){var e,r,n,i;return e=ke,"then"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(_e)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="THEN"):(ke=e,e=a)):(ke=e,e=a),e}function Mr(){var e,r,n,i;return e=ke,"else"===t.substr(ke,4).toLowerCase()?(r=t.substr(ke,4),ke+=4):(r=a,0===Be&&Xe(Le)),r!==a?(n=ke,Be++,i=mt(),Be--,i===a?n=void 0:(ke=n,n=a),n!==a?(Ze=e,e="ELSE"):(ke=e,e=a)):(ke=e,e=a),e}function Er(){var e;return 44===t.charCodeAt(ke)?(e=",",ke++):(e=a,0===Be&&Xe(Re)),e}function Fr(){var e;return 40===t.charCodeAt(ke)?(e="(",ke++):(e=a,0===Be&&Xe(Ue)),e}function Dr(){var e;return 41===t.charCodeAt(ke)?(e=")",ke++):(e=a,0===Be&&Xe(Ve)),e}function Pr(){var e,t;for(e=[],t=_r();t!==a;)e.push(t),t=_r();return e}function _r(){var e;return w.test(t.charAt(ke))?(e=t.charAt(ke),ke++):(e=a,0===Be&&Xe(Je)),e}function Lr(){var e,r,n,i;if(e=ke,(r=vt())!==a&&(Ze=e),(e=r)===a)if(e=ke,96===t.charCodeAt(ke)?(r="`",ke++):(r=a,0===Be&&Xe($e)),r!==a){if(n=[],I.test(t.charAt(ke))?(i=t.charAt(ke),ke++):(i=a,0===Be&&Xe(He)),i!==a)for(;i!==a;)n.push(i),I.test(t.charAt(ke))?(i=t.charAt(ke),ke++):(i=a,0===Be&&Xe(He));else n=a;n!==a?(96===t.charCodeAt(ke)?(i="`",ke++):(i=a,0===Be&&Xe($e)),i!==a?(Ze=e,e=function(e){return e.join("")}(n)):(ke=e,e=a)):(ke=e,e=a)}else ke=e,e=a;return e}function Rr(e,t,r,n){var a={type:"binary-expression",operator:e,left:t,right:r};return void 0!==n&&(a.escape=n),a}function Ur(e,t){for(var r=e,n=0;n<t.length;n++)r=Rr(t[n][1],r,t[n][3]);return r}if((n=o())!==a&&ke===t.length)return n;throw n!==a&&ke<t.length&&Xe({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(Ye,qe<t.length?t.charAt(qe):null,qe<t.length?Ke(qe,qe+1):Ke(qe,qe))}}},(K=ee).exports&&(K.exports=X());var te=ee.exports;const re=new Set(["current_timestamp","current_date","current_time"]);class ne{static makeBool(e){return ie(e)}static featureValue(e,t,r,n){return ve(e,t,r,n)}static equalsNull(e){return null===e}static applyLike(e,t,r){return pe(e,t,r)}static ensureArray(e){return se(e)}static applyIn(e,t){return ce(e,t)}static currentDate(e){return s.u.fromNow(e)}static makeSqlInterval(e,t,r){return m.createFromValueAndQualifer(e,t,r)}static convertInterval(e){return e instanceof m?e.valueInMilliseconds():e}static currentTimestamp(e){return x(new Date,e)}static compare(e,t,r,n){return H(t,r,e)}static calculate(e,t,r,n){return G(e,t,r,n)}static evaluateTime(e){return L(e)}static evaluateTimestamp(e,t,r){return R(e,t,r)}static evaluateDate(e,t){return U(e,t)}static evaluateFunction(e,t,r){return q(e,t,r)}static lookup(e,t){const r=t[e];return void 0===r?null:r}static between(e,t,r){return null==e||null==t[0]||null==t[1]?null:H(e,t[0],">=")&&H(e,t[1],"<=")}static notbetween(e,t,r){return null==e||null==t[0]||null==t[1]?null:H(e,t[0],"<")||H(e,t[1],">")}static ternaryNot(e){return oe(e)}static ternaryAnd(e,t){return ue(e,t)}static ternaryOr(e,t){return le(e,t)}}class ae{constructor(e,t,r="UTC"){this.fieldsIndex=t,this.timeZone=r,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=class{static parse(e){return te.parse(e)}}.parse(e);const{isStandardized:n,isAggregate:a,referencedFieldNames:i}=this._extractExpressionInfo(t);this._referencedFieldNames=i,this.isStandardized=n,this.isAggregate=a}static convertValueToStorageFormat(e,t=null){if(null===t)return E(e)?e.getTime():F(e)?e.toMillis():_(e)?e.toStorageFormat():P(e)?e.toStorageString():D(e)?e.toStorageFormat():e;switch(t){case"date":return E(e)?e.getTime():F(e)?e.toMillis():_(e)?e.toMilliseconds():D(e)?e.toNumber():e;case"date-only":return E(e)?s.u.fromDateJS(e).toString():_(e)?s.u.fromSqlTimeStampOffset(e).toString():F(e)?s.u.fromDateTime(e).toString():e;case"time-only":return E(e)?u.n.fromDateJS(e).toStorageString():F(e)?u.n.fromDateTime(e).toStorageString():_(e)?u.n.fromSqlTimeStampOffset(e).toStorageString():P(e)?e.toStorageString():e;case"timestamp-offset":if(E(e))return o.H.fromJSDate(e).toStorageFormat();if(F(e))return o.H.fromDateTime(e).toStorageFormat();if(_(e))return e.toStorageFormat()}return e}static create(e,t,r="UTC"){return new ae(e,t,r)}get fieldNames(){return this._referencedFieldNames}testSet(e,t=he){return!!this._evaluateNode(this.parseTree,null,t,e)}calculateValue(e,t=he){const r=this._evaluateNode(this.parseTree,e,t,null);return r instanceof m?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(e,t=he){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone):(0,i.Z)("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone))}testFeature(e,t=he){return!!this._evaluateNode(this.parseTree,e,t,null)}testFeatureCompiled(e,t=he){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone):(0,i.Z)("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||re.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return this._visitAll(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return this._visitAll(this.parseTree,(t=>{if("function"===t.type){const r=t.name.toLowerCase(),n=t.args.value[0];if("column-reference"===n.type){const t=n.column,a=`${r}-${t}`;e.has(a)||e.set(a,{aggregateType:r,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return this._visitAll(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",e).bind(ne)}_extractExpressionInfo(e){const t=[],r=new Set;let n=!0,a=!1;return this._visitAll(this.parseTree,(i=>{switch(i.type){case"column-reference":{const n=e?.get(i.column);let a,s;n?a=s=n.name??"":(s=i.column,a=s.toLowerCase()),r.has(a)||(r.add(a),t.push(s)),i.column=s;break}case"function":{const{name:e,args:t}=i,r=t.value.length;n&&(n=function(e,t){const r=j[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}(e,r)),!1===a&&(a=c(e,r));break}}})),{referencedFieldNames:Array.from(t),isStandardized:n,isAggregate:a}}_visitAll(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":this._visitAll(e.operand,t),this._visitAll(e.value,t);break;case"case-expression":for(const r of e.clauses)this._visitAll(r,t);"simple"===e.format&&this._visitAll(e.operand,t),null!==e.else&&this._visitAll(e.else,t);break;case"expression-list":for(const r of e.value)this._visitAll(r,t);break;case"unary-expression":this._visitAll(e.expr,t);break;case"binary-expression":this._visitAll(e.left,t),this._visitAll(e.right,t);break;case"function":this._visitAll(e.args,t)}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let t="";if("simple"===e.format){const r=this.evaluateNodeToJavaScript(e.operand);t="( ";for(let n=0;n<e.clauses.length;n++)t+=" (this.compare('=',"+r+","+this.evaluateNodeToJavaScript(e.clauses[n].operand)+") ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(let r=0;r<e.clauses.length;r++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t}case"parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const r of e.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(r);return t+="]",t}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new a.eS(a.f.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new a.eS(a.f.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)"}throw new a.eS(a.f.UnsupportedOperator,{operator:e.operator});case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"time":return"this.evaluateTime(JSON.stringify(node.value))";case"date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case"timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case"current-time":return"date"===e.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+", timeZone)"}throw new a.eS(a.f.UnsupportedSyntax,{node:e.type})}_evaluateNode(e,t,r,i){let o;switch(e.type){case"interval":{const n=this._evaluateNode(e.value,t,r,i);return m.createFromValueAndQualifer(n,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const n=this._evaluateNode(e.operand,t,r,i);for(let a=0;a<e.clauses.length;a++)if(H(n,this._evaluateNode(e.clauses[a].operand,t,r,i),"=",this.timeZone))return this._evaluateNode(e.clauses[a].value,t,r,i);if(null!==e.else)return this._evaluateNode(e.else,t,r,i)}else{for(let n=0;n<e.clauses.length;n++)if(ie(this._evaluateNode(e.clauses[n].operand,t,r,i)))return this._evaluateNode(e.clauses[n].value,t,r,i);if(null!==e.else)return this._evaluateNode(e.else,t,r,i)}return null;case"parameter":return o=this.parameters[e.value.toLowerCase()],E(o)?l.ou.fromJSDate(o):o instanceof n.iG?o.toDateTime():o;case"expression-list":{const n=[];for(const a of e.value)n.push(this._evaluateNode(a,t,r,i));return n}case"unary-expression":return oe(this._evaluateNode(e.expr,t,r,i));case"binary-expression":switch(e.operator){case"AND":return ue(this._evaluateNode(e.left,t,r,i),this._evaluateNode(e.right,t,r,i));case"OR":return le(this._evaluateNode(e.left,t,r,i),this._evaluateNode(e.right,t,r,i));case"IS":if("null"!==e.right.type)throw new a.eS(a.f.UnsupportedIsRhs);return null===this._evaluateNode(e.left,t,r,i);case"ISNOT":if("null"!==e.right.type)throw new a.eS(a.f.UnsupportedIsRhs);return null!==this._evaluateNode(e.left,t,r,i);case"IN":{const n=se(this._evaluateNode(e.right,t,r,i));return ce(this._evaluateNode(e.left,t,r,i),n)}case"NOT IN":{const n=se(this._evaluateNode(e.right,t,r,i));return oe(ce(this._evaluateNode(e.left,t,r,i),n))}case"BETWEEN":{const n=this._evaluateNode(e.left,t,r,i),a=this._evaluateNode(e.right,t,r,i);return null==n||null==a[0]||null==a[1]?null:H(n,a[0],">=",this.timeZone)&&H(n,a[1],"<=",this.timeZone)}case"NOTBETWEEN":{const n=this._evaluateNode(e.left,t,r,i),a=this._evaluateNode(e.right,t,r,i);return null==n||null==a[0]||null==a[1]?null:H(n,a[0],"<",this.timeZone)||H(n,a[1],">",this.timeZone)}case"LIKE":return pe(this._evaluateNode(e.left,t,r,i),this._evaluateNode(e.right,t,r,i),e.escape);case"NOT LIKE":return oe(pe(this._evaluateNode(e.left,t,r,i),this._evaluateNode(e.right,t,r,i),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return H(this._evaluateNode(e.left,t,r,i),this._evaluateNode(e.right,t,r,i),e.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return G(e.operator,this._evaluateNode(e.left,t,r,i),this._evaluateNode(e.right,t,r,i),this.timeZone)}case"null":case"boolean":case"string":case"number":return e.value;case"date":return e.parsedValue??=U(e.value,"unknown"),e.parsedValue;case"timestamp":return e.parsedValue??=R(e.value,"unknown"),e.parsedValue;case"time":return L(e.value);case"current-time":return"date"===e.mode?s.u.fromNow(this.timeZone):x(new Date,this.timeZone);case"column-reference":return ve(t,e.column,this.fieldsIndex,r);case"data-type":return e.value;case"function":{if(this.isAggregate&&c(e.name,e.args.value.length)){const t=[];for(const n of e.args?.value||[]){const e=[];for(const t of i||[])e.push(this._evaluateNode(n,t,r,null));t.push(e)}return function(e,t){const r=f[e.toLowerCase()];if(null==r)throw new a.eS(a.f.FunctionNotRecognized);if(t.length<r.minParams||t.length>r.maxParams)throw new a.eS(a.f.InvalidParameterCount,{name:e.toUpperCase()});return r.evaluate(t)}(e.name,t)}const n=this._evaluateNode(e.args,t,r,i);return q(e.name,n,this.timeZone)}}throw new a.eS(a.f.UnsupportedSyntax,{node:e.type})}}function ie(e){return!0===e}function se(e){return Array.isArray(e)?e:[e]}function oe(e){return null!==e?!0!==e:null}function ue(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function le(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function ce(e,t){if(null==e)return null;let r=!1;for(const n of t)if(null==n)r=null;else if(e===n){r=!0;break}return r}const fe="-[]/{}()*+?.\\^$|";var de;function pe(e,t,r){return null==e?null:function(e,t){const r=t;let n="",a=de.Normal;for(let t=0;t<e.length;t++){const i=e.charAt(t);switch(a){case de.Normal:i===r?a=de.Escaped:fe.includes(i)?n+="\\"+i:n+="%"===i?".*":"_"===i?".":i;break;case de.Escaped:fe.includes(i)?n+="\\"+i:n+=i,a=de.Normal}}return new RegExp("^"+n+"$","m")}(t,r).test(e)}function ve(e,t,r,n){const a=n.getAttribute(e,t),i=r?.get(t);return null==a||"esriFieldTypeDate"!==i?.type&&"date"!==i?.type?null==a||"esriFieldTypeDateOnly"!==i?.type&&"date-only"!==i?.type?null==a||"esriFieldTypeTimeOnly"!==i?.type&&"time-only"!==i?.type?null==a||"esriFieldTypeTimestampOffset"!==i?.type&&"timestamp-offset"!==i?.type?a:new o.H(a):u.n.fromReader(a):s.u.fromReader(a):x(new Date(a),r?.getLuxonTimeZone(i.name)??l.Qf.utcInstance)}!function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"}(de||(de={}));const he={getAttribute:(e,t)=>(function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e)[t]}}}]);