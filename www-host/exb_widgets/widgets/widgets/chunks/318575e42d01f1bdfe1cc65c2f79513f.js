"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[5122],{69666:(t,e,n)=>{function r(){return[0,0]}function o(t,e){return[t,e]}function i(t,e){return new Float64Array(t,e,2)}function s(){return o(1,1)}function c(){return o(1,0)}function a(){return o(0,1)}n.d(e,{a:()=>r,c:()=>i,f:()=>o});const l=s(),u=c(),f=a();Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_X:u,UNIT_Y:f,ZEROS:[0,0],clone:function(t){return[t[0],t[1]]},create:r,createView:i,fromArray:function(t,e=[0,0]){const n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e},fromValues:o,ones:s,unitX:c,unitY:a,zeros:function(){return[0,0]}},Symbol.toStringTag,{value:"Module"}))},67262:(t,e,n)=>{n.d(e,{d:()=>i});var r=n(19431),o=n(35914);function i(t,e,n){const i=Array.isArray(t),u=i?t.length/e:t.byteLength/(4*e),f=i?t:new Uint32Array(t,0,u*e),T=n?.minReduction??0,A=n?.originalIndices||null,g=A?A.length:0,N=n?.componentOffsets||null;let d=0;if(N)for(let t=0;t<N.length-1;t++){const e=N[t+1]-N[t];e>d&&(d=e)}else d=u;const I=Math.floor(1.1*d)+1;(null==l||l.length<2*I)&&(l=new Uint32Array((0,r.Sf)(2*I)));for(let t=0;t<2*I;t++)l[t]=0;let O=0;const E=!!N&&!!A,p=E?g:u;let S=(0,o.$z)(u);const h=new Uint32Array(g),m=1.96;let R=0!==T?Math.ceil(4*m*m/(T*T)*T*(1-T)):p,L=1,w=N?N[1]:p;for(let t=0;t<p;t++){if(t===R){const e=1-O/t;if(e+m*Math.sqrt(e*(1-e)/t)<T)return null;R*=2}if(t===w){for(let t=0;t<2*I;t++)l[t]=0;if(A)for(let t=N[L-1];t<N[L];t++)h[t]=S[A[t]];w=N[++L]}const n=E?A[t]:t,r=n*e,o=a(f,r,e);let i=o%I,c=O;for(;0!==l[2*i+1];){if(l[2*i]===o){const t=l[2*i+1]-1;if(s(f,r,t*e,e)){c=S[t];break}}i++,i>=I&&(i-=I)}c===O&&(l[2*i]=o,l[2*i+1]=n+1,O++),S[n]=c}if(0!==T&&1-O/u<T)return null;if(E){for(let t=N[L-1];t<h.length;t++)h[t]=S[A[t]];S=(0,o.mi)(h)}const v=i?new Array(O):new Uint32Array(O*e);O=0;for(let t=0;t<p;t++)S[t]===O&&(c(f,(E?A[t]:t)*e,v,O*e,e),O++);if(A&&!E){const t=new Uint32Array(g);for(let e=0;e<t.length;e++)t[e]=S[A[e]];S=(0,o.mi)(t)}return{buffer:Array.isArray(v)?v:v.buffer,indices:S,uniqueCount:O}}function s(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function c(t,e,n,r,o){for(let i=0;i<o;i++)n[r+i]=t[e+i]}function a(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let l=null},95397:(t,e,n)=>{n.d(e,{K:()=>i});var r=n(91907),o=n(41163);function i(t,e=0){const n=t.stride;return Array.from(t.fields.keys()).map((r=>{const i=t.fields.get(r),c=i.constructor.ElementCount,a=s(i.constructor.ElementType),l=i.offset,u=!(!i.optional||!i.optional.glNormalized);return new o.G(r,c,a,l,n,u,e)}))}function s(t){const e=c[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}const c={u8:r.g.UNSIGNED_BYTE,u16:r.g.UNSIGNED_SHORT,u32:r.g.UNSIGNED_INT,i8:r.g.BYTE,i16:r.g.SHORT,i32:r.g.INT,f32:r.g.FLOAT}},21414:(t,e,n)=>{var r;n.d(e,{T:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.AUXPOS1="auxpos1",t.AUXPOS2="auxpos2",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMALA="normalA",t.NORMALB="normalB",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},1844:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var r=n(44685);function o(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:new r.Gw(t.layout)}}var i=n(82976),s=n(11591),c=n(73453);class a{async extract(t){const e=l(t),n=(0,c.Kl)(e),r=[e.data.buffer];return{result:u(n,r),transferList:r}}async extractComponentsEdgeLocations(t){const e=l(t),n=(0,c.kY)(e.data,e.skipDeduplicate,e.indices,e.indicesLength),r=[];return{result:o((0,s.n)(n,T,A).regular.instancesData,r),transferList:r}}async extractEdgeLocations(t){const e=l(t),n=(0,c.kY)(e.data,e.skipDeduplicate,e.indices,e.indicesLength),r=[];return{result:o((0,s.n)(n,f,A).regular.instancesData,r),transferList:r}}}function l(t){return{data:i.tf.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indices):"Uint16Array"===t.indicesType?new Uint16Array(t.indices):t.indices,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}function u(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:o(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:o(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}const f=new class{allocate(t){return c.Yr.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1)}},T=new class{allocate(t){return c.n_.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex)}},A={allocate:()=>null,write:()=>{},trim:()=>null}},82976:(t,e,n)=>{n.d(e,{Hr:()=>l,dG:()=>a,tf:()=>s});var r=n(95397),o=n(44685),i=n(21414);const s=(0,o.U$)().vec3f(i.T.POSITION).u16(i.T.COMPONENTINDEX),c=(0,o.U$)().vec2u8(i.T.SIDENESS),a=((0,r.K)(c),(0,o.U$)().vec3f(i.T.POSITION0).vec3f(i.T.POSITION1).vec3f(i.T.NORMAL).u16(i.T.COMPONENTINDEX).u8(i.T.VARIANTOFFSET,{glNormalized:!0}).u8(i.T.VARIANTSTROKE).u8(i.T.VARIANTEXTENSION,{glNormalized:!0})),l=(0,o.U$)().vec3f(i.T.POSITION0).vec3f(i.T.POSITION1).vec3f(i.T.NORMALA).vec3f(i.T.NORMALB).u16(i.T.COMPONENTINDEX).u8(i.T.VARIANTOFFSET,{glNormalized:!0}).u8(i.T.VARIANTSTROKE).u8(i.T.VARIANTEXTENSION,{glNormalized:!0});new Map([[i.T.POSITION0,0],[i.T.POSITION1,1],[i.T.COMPONENTINDEX,2],[i.T.VARIANTOFFSET,3],[i.T.VARIANTSTROKE,4],[i.T.VARIANTEXTENSION,5],[i.T.NORMAL,6],[i.T.NORMALA,6],[i.T.NORMALB,7],[i.T.SIDENESS,8]])},11591:(t,e,n)=>{n.d(e,{n:()=>u});var r=n(7753),o=n(19431),i=n(6766),s=n(8909);const c=-1;var a,l;function u(t,e,n,s=I){const a=t.vertices.position,l=t.vertices.componentIndex,u=(0,o.Vl)(s.anglePlanar),d=(0,o.Vl)(s.angleSignificantEdge),O=Math.cos(d),E=Math.cos(u),p=N.edge,S=p.position0,h=p.position1,m=p.faceNormal0,R=p.faceNormal1,L=g(t),w=function(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors;let o=0;for(let t=0;t<e;t++){const e=r[3*t],i=r[3*t+1],s=r[3*t+2],a=n[3*t],l=n[3*t+1],u=n[3*t+2];o+=e===c||a<l?1:0,o+=i===c||l<u?1:0,o+=s===c||u<a?1:0}const i=new Int32Array(4*o);let s=0;for(let t=0;t<e;t++){const e=r[3*t],o=r[3*t+1],a=r[3*t+2],l=n[3*t],u=n[3*t+1],f=n[3*t+2];(e===c||l<u)&&(i[s++]=l,i[s++]=u,i[s++]=t,i[s++]=e),(o===c||u<f)&&(i[s++]=u,i[s++]=f,i[s++]=t,i[s++]=o),(a===c||f<l)&&(i[s++]=f,i[s++]=l,i[s++]=t,i[s++]=a)}return i}(t),v=w.length/4,y=e.allocate(v);let D=0;const U=v,M=n.allocate(U);let C=0,V=0,b=0;const F=(0,r.wR)(0,v),P=new Float32Array(v);P.forEach(((t,e,n)=>{a.getVec(w[4*e],S),a.getVec(w[4*e+1],h),n[e]=(0,i.o)(S,h)})),F.sort(((t,e)=>P[e]-P[t]));const B=new Array,_=new Array;for(let t=0;t<v;t++){const r=F[t],o=P[r],s=w[4*r],g=w[4*r+1],N=w[4*r+2],d=w[4*r+3],I=d===c;if(a.getVec(s,S),a.getVec(g,h),I)(0,i.s)(m,L[3*N],L[3*N+1],L[3*N+2]),(0,i.c)(R,m),p.componentIndex=l.get(s),p.cosAngle=(0,i.j)(m,R);else{if((0,i.s)(m,L[3*N],L[3*N+1],L[3*N+2]),(0,i.s)(R,L[3*d],L[3*d+1],L[3*d+2]),p.componentIndex=l.get(s),p.cosAngle=(0,i.j)(m,R),T(p,E))continue;p.cosAngle<-.9999&&(0,i.c)(R,m)}V+=o,b++,I||f(p,O)?(e.write(y,D++,p),B.push(o)):A(p,u)&&(n.write(M,C++,p),_.push(o))}const x=new Float32Array(B.reverse()),G=new Float32Array(_.reverse());return{regular:{instancesData:e.trim(y,D),lodInfo:{lengths:x}},silhouette:{instancesData:n.trim(M,C),lodInfo:{lengths:G}},averageEdgeLength:V/b}}function f(t,e){return t.cosAngle<e}function T(t,e){return t.cosAngle>e}function A(t,e){const n=(0,o.ZF)(t.cosAngle),r=N.fwd,s=N.ortho;return(0,i.C)(r,t.position1,t.position0),n*((0,i.j)((0,i.b)(s,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}function g(t){const e=t.faces.length/3,n=t.vertices.position,r=t.faces,o=d.v0,s=d.v1,c=d.v2,a=new Float32Array(3*e);for(let t=0;t<e;t++){const e=r[3*t],l=r[3*t+1],u=r[3*t+2];n.getVec(e,o),n.getVec(l,s),n.getVec(u,c),(0,i.f)(s,s,o),(0,i.f)(c,c,o),(0,i.b)(o,s,c),(0,i.n)(o,o),a[3*t]=o[0],a[3*t+1]=o[1],a[3*t+2]=o[2]}return a}(l=a||(a={}))[l.SOLID=0]="SOLID",l[l.SKETCH=1]="SKETCH";const N={edge:{position0:(0,s.c)(),position1:(0,s.c)(),faceNormal0:(0,s.c)(),faceNormal1:(0,s.c)(),componentIndex:0,cosAngle:0},ortho:(0,s.c)(),fwd:(0,s.c)()},d={v0:(0,s.c)(),v1:(0,s.c)(),v2:(0,s.c)()},I={anglePlanar:4,angleSignificantEdge:35}},73453:(t,e,n)=>{n.d(e,{Kl:()=>R,n_:()=>U,kY:()=>L,Yr:()=>D});var r=n(67262);function o(t,e,n){const r=e/3,o=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(t,e)=>{t<e?o[t+1]++:i[e+1]++};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],o=t[3*e+2];s(n,r),s(r,o),s(o,n)}let c=0,a=0;for(let t=0;t<n;t++){const e=o[t+1],n=i[t+1];o[t+1]=c,i[t+1]=a,c+=e,a+=n}const l=new Uint32Array(6*r),u=o[n],f=(t,e,n)=>{if(t<e){const r=o[t+1]++;l[2*r]=e,l[2*r+1]=n}else{const r=i[e+1]++;l[2*u+2*r]=t,l[2*u+2*r+1]=n}};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],o=t[3*e+2];f(n,r,e),f(r,o,e),f(o,n,e)}const T=(t,e)=>{const n=2*t,r=e-t;for(let t=1;t<r;t++){const e=l[n+2*t],r=l[n+2*t+1];let o=t-1;for(;o>=0&&l[n+2*o]>e;o--)l[n+2*o+2]=l[n+2*o],l[n+2*o+3]=l[n+2*o+1];l[n+2*o+2]=e,l[n+2*o+3]=r}};for(let t=0;t<n;t++)T(o[t],o[t+1]),T(u+i[t],u+i[t+1]);const A=new Int32Array(3*r),g=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,N=(t,e)=>{const n=g(t,e);A[3*e+n]=-1},d=(t,e,n,r)=>{const o=g(t,e);A[3*e+o]=r;const i=g(n,r);A[3*r+i]=e};for(let t=0;t<n;t++){let e=o[t];const n=o[t+1];let r=i[t];const s=i[t+1];for(;e<n&&r<s;){const n=l[2*e],o=l[2*u+2*r];n===o?(d(t,l[2*e+1],o,l[2*u+2*r+1]),e++,r++):n<o?(N(t,l[2*e+1]),e++):(N(o,l[2*u+2*r+1]),r++)}for(;e<n;)N(t,l[2*e+1]),e++;for(;r<s;)N(l[2*u+2*r],l[2*u+2*r+1]),r++}return A}var i=n(44685),s=n(21414),c=n(82976),a=n(4157),l=n(6766),u=n(8909),f=n(95397);class T{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?I:d}write(t,e,n){const r=this._edgeHashFunction(n);h.seed=r;const o=h.getIntRange(0,255),i=h.getIntRange(0,this.settings.variants-1),s=h.getFloat(),c=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**1.2*n}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,o),t.variantStroke.set(e,i),t.variantExtension.set(e,c)}trim(t,e){return t.slice(0,e)}}const A=new Float32Array(6),g=new Uint32Array(A.buffer),N=new Uint32Array(1);function d(t){const e=A;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],N[0]=5381;for(let t=0;t<g.length;t++)N[0]=31*N[0]+g[t];return N[0]}function I(t){const e=A;e[0]=O(t.position0[0]),e[1]=O(t.position0[1]),e[2]=O(t.position0[2]),e[3]=O(t.position1[0]),e[4]=O(t.position1[1]),e[5]=O(t.position1[2]),N[0]=5381;for(let t=0;t<g.length;t++)N[0]=31*N[0]+g[t];return N[0]}function O(t){return Math.round(1e4*t)/1e4}class E{constructor(){this._commonWriter=new T}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.dG.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,l.g)(S,n.faceNormal0,n.faceNormal1),(0,l.n)(S,S),t.normal.setVec(e,S)}trim(t,e){return this._commonWriter.trim(t,e)}}E.Layout=c.dG,E.glLayout=(0,f.K)(c.dG,1);class p{constructor(){this._commonWriter=new T}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.Hr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this._commonWriter.trim(t,e)}}p.Layout=c.Hr,p.glLayout=(0,f.K)(c.Hr,1);const S=(0,u.c)(),h=new a.Z;var m=n(11591);function R(t){const e=L(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return v.updateSettings(t.writerSettings),y.updateSettings(t.writerSettings),(0,m.n)(e,v,y)}function L(t,e,n,i){if(e){const e=o(n,i,t.count);return new w(n,i,e,t)}const s=(0,r.d)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:i}),a=o(s.indices,i,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:a,vertices:c.tf.createView(s.buffer)}}class w{constructor(t,e,n,r){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=r}}const v=new E,y=new p,D=(0,i.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1),U=(0,i.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1).u16(s.T.COMPONENTINDEX)},41163:(t,e,n)=>{n.d(e,{G:()=>r});class r{constructor(t,e,n,r,o,i=!1,s=0){this.name=t,this.count=e,this.type=n,this.offset=r,this.stride=o,this.normalized=i,this.divisor=s}}}}]);